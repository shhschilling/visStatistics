---
title: "visStatistics"
author: "Sabine Schilling"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette:
    number_sections: true
    toc: true
bibliography: visStatistics.bib
vignette: >
  %\VignetteIndexEntry{visStatistics}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(visStatistics)
```

<!-- Unnumbered section -->
# Abstract{-}
<!--  1) the overall purpose of the study and the research problem(s) you investigated; 2) the basic design of the study; 3) major findings or trends found as a result of your analysis; and, 4) a brief summary of your interpretations and conclusions.
-->

<!-- 1) the overall purpose of the study and the research problem(s) you investigated; -->
<!-- A) Statistics consulting -->
Statistical consulting  requires often both a quick visualization and a reproducible statistical analysis of the presented raw data. The package `visStatistics` with its core function `visstat()` fulfils this need. Based on a decision tree it picks the 
statistical hypothesis test  with the highest statistical power between the dependent variable (response) `varsample` and the independent variable (feature) `varfactor`. The corresponding test statistics including eventual post-hoc-analysis are returned and 
a graph displaying the raw data accordingly to the chosen test is generated. This fully automated workflow is especially suited for browser based interfaces to server-based deployments of R. Goal of the reminder of this vignette is to document the decision tree underlying `vistat()`.

# Decision tree
The decision tree depends both on the type of the  data (numerical/integer or categorical) and the number of levels of the categorical data.

## Two sample tests: Student's t-Test or Wilcoxon rank sum test

If the feature `varfactor` has  two levels and  the response `varsample` is of type numerical or integer, either a `t.test()` or `wilcox.test()`  with their respective default parameter settings are executed. The choice of either test follows the following algorithm: 

* If the sample size is bigger than 100, the function `visstat()` performs always a `t.test()`.Lumley et al. (2002)Lumley:2002dsa <doi:10.1146/annurev.publhealth.23.100901.140546>
    
# Implemented tests
`lm()`, `t.test()`, `wilcox.test()`, `aov()`, `kruskal.test()`, `fisher.test()`, `chisqu.test()`

## Implemented tests to check the normal distribution of standardized residuals
`shapiro.test()` and `ad.test()`

##Implemented post-hoc tests
`TukeyHSD()` for `aov() `and `pairwise.wilcox.test()` for `kruskal.test()`.
    For the comparison of averages, the implemented algorithm  depends on the value of the parameter of conf.level, which defaults to 0.95: 
    If the p-values of the standardized residuals of both shapiro.test() or ad.test() are smaller 
    than the error probability 1-conf.level, kruskal.test() resp. wilcox.test() are performed, otherwise the oneway.test()
    and aov() resp. t.test() are performed and displayed. Exception: 
    If the sample size is bigger than 100, t.test() is always performed and wilcox.test() is never executed 
    (Lumley et al. (2002) <doi:10.1146/annurev.publhealth.23.100901.140546>). 
    For the test of independence of count data, Cochran's rule (Cochran (1954) <doi:10.2307/3001666>) is implemented: 
    If more than 20 percent of all cells have a count smaller than 5, fisher.test() is performed and displayed,
    otherwise chisqu.test(). In both cases case an additional mosaic plot is generated. 
## Bla 2
###  Bla 3
* Bulleted list
* Item 2
    * Nested bullets need a 4-space indent.
    * Item 2b

* It's possible to put multiple paragraphs of text in a list item. 

    But to do that, the second and subsequent paragraphs must be
    indented by four or more spaces. It looks better if the first
    bullet is also indented.
    
1.  Item 1.
    *  Item a
    *  Item b
1.  Item 2.    
 
 
```
# A comment
add <- function(a, b) a + b
```    
```{r}
add <- function(a, b) a + b
```    
```{r, results = "asis"}
#pander::pandoc.table(iris[1:3, 1:4])  #pander has to be included 
```
